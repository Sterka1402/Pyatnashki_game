(()=>{"use strict";window.addEventListener("load",(()=>{(new class{constructor(){this.tilesWin=[],this.gameWon=!1,this.bindMethods()}bindMethods(){this.init=this.init.bind(this),this.createButtons=this.createButtons.bind(this),this.getWinnerTiles=this.getWinnerTiles.bind(this),this.renderTiles=this.renderTiles.bind(this),this.beginGame=this.beginGame.bind(this),this.shuffle=this.shuffle.bind(this),this.moveToEmpty=this.moveToEmpty.bind(this),this.checkTheEndOfGame=this.checkTheEndOfGame.bind(this),this.getSizeGame=this.getSizeGame.bind(this)}getWinnerTiles(){for(let t=1;t<this.boardSize;t++)this.tilesWin.push(t)}createButtons(){this.gameContainer=document.querySelector(".game-begin"),this.startGameBtn=document.createElement("BUTTON"),this.startGameBtn.innerHTML="Start new Game",this.startGameBtn.classList.add("start-game"),this.selectSizeGame=document.createElement("SELECT"),this.selectSizeGame.innerHTML="\n      <option disabled selected>Choose size </option>\n      <option value = '3' > 3 x 3 </option>   \n      <option value = '4' > 4 x 4 </option>\n      <option value = '5' > 5 x 5 </option>  \n    ",this.selectSizeGame.classList.add("select-size")}getSizeGame(t){const{value:i}=t.target;return"3"===i&&(this.size=3,this.boardSizeClass="board-size-3"),"4"===i&&(this.size=4,this.boardSizeClass="board-size-4"),"5"===i&&(this.size=5,this.boardSizeClass="board-size-5"),this.size}init(){this.createButtons(),this.boardSizeClass="board-size-3",this.boardGame=document.createElement("DIV"),this.boardGame.classList.add(`${this.boardSizeClass}`,"before-start"),this.gameContainer.append(this.startGameBtn,this.selectSizeGame,this.boardGame),this.size=this.selectSizeGame.addEventListener("change",this.getSizeGame)||3,console.log(this.size),this.boardSize=this.size*this.size,console.log(this.boardSize),this.getWinnerTiles(),this.tiles=[...this.tilesWin],this.renderTiles(),this.startGameBtn.addEventListener("click",this.beginGame)}beginGame(){this.gameWon=!1,this.boardGame.classList.remove("before-start"),this.tiles=[...this.tilesWin],this.shuffle(),this.renderTiles()}shuffle(){for(let t=this.boardSize-2;t>0;t--){const i=Math.floor(Math.random()*(t+1)),e=this.tiles[i];this.tiles[i]=this.tiles[t],this.tiles[t]=e}return this.tiles[this.boardSize-1]="",this.tiles}renderTiles(){this.boardGame.innerHTML="",this.tiles.forEach((t=>{new class{constructor(t){this.name=t}render(t){const i=document.createElement("div");i.innerHTML=`${this.name}`,i.classList.add("tiles"),i.setAttribute("data-key",`${this.name}`),""===this.name&&i.classList.add("empty"),t.append(i)}}(t).render(this.boardGame)})),this.boardGame.addEventListener("click",this.moveToEmpty),localStorage.setItem("tiles",JSON.stringify(this.tiles))}moveToEmpty(t){if(!0===this.gameWon)return;if(this.tiles.length!==this.boardSize)return;const i=t.target;if(i.classList.contains("empty"))return;const e=this.tiles.findIndex((t=>t===Number(i.dataset.key)));if(""===this.tiles[e-1]&&e%this.size!=0){const t=this.tiles[e-1];this.tiles[e-1]=this.tiles[e],this.tiles[e]=t}if(""===this.tiles[e+1]&&(e+1)%this.size!=0){const t=this.tiles[e+1];this.tiles[e+1]=this.tiles[e],this.tiles[e]=t}if(""===this.tiles[e-this.size]){const t=this.tiles[e-this.size];this.tiles[e-this.size]=this.tiles[e],this.tiles[e]=t}if(""===this.tiles[e+this.size]){const t=this.tiles[e+this.size];this.tiles[e+this.size]=this.tiles[e],this.tiles[e]=t}this.renderTiles(this.tiles),this.checkTheEndOfGame()}checkTheEndOfGame(){const t=[...this.tiles];t.pop(),!0!==this.gameWon&&this.tiles.length===this.boardSize&&JSON.stringify(t)===JSON.stringify(this.tilesWin)&&(this.gameWon=!0,this.boardGame.classList.add("before-start"),setTimeout((()=>alert("You Win!")),0))}}).init()}))})();