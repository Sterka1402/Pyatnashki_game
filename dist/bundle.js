(()=>{"use strict";window.addEventListener("load",(()=>{new class{constructor(i){this.tilesWin=[],this.size=i,this.boardSize=i*i,this.gameWon=!1,this.bindMethods()}bindMethods(){this.init=this.init.bind(this),this.getWinnerTiles=this.getWinnerTiles.bind(this),this.renderTiles=this.renderTiles.bind(this),this.beginGame=this.beginGame.bind(this),this.shuffle=this.shuffle.bind(this),this.moveToEmpty=this.moveToEmpty.bind(this),this.checkTheEndOfGame=this.checkTheEndOfGame.bind(this)}getWinnerTiles(){for(let i=1;i<this.boardSize;i++)this.tilesWin.push(i)}init(){const i=document.querySelector(".game-begin"),t=document.createElement("BUTTON");t.innerHTML="Start new Game",t.classList.add("start-game"),this.container=document.createElement("DIV"),this.container.classList.add("container"),i.append(t,this.container),this.getWinnerTiles(),this.tiles=[...this.tilesWin],this.renderTiles(),t.addEventListener("click",this.beginGame)}beginGame(){this.tiles=[...this.tilesWin],this.shuffle(),this.renderTiles()}shuffle(){for(let i=this.boardSize-2;i>0;i--){const t=Math.floor(Math.random()*(i+1)),s=this.tiles[t];this.tiles[t]=this.tiles[i],this.tiles[i]=s}return this.tiles[this.boardSize-1]="",this.tiles}renderTiles(){this.container.innerHTML="",this.tiles.forEach((i=>{new class{constructor(i){this.name=i}render(i){const t=document.createElement("div");t.innerHTML=`${this.name}`,t.classList.add("tiles"),t.setAttribute("data-key",`${this.name}`),""===this.name&&t.classList.add("empty"),i.append(t)}}(i).render(this.container)})),this.container.addEventListener("click",this.moveToEmpty),localStorage.setItem("tiles",JSON.stringify(this.tiles))}moveToEmpty(i){if(this.tiles.length!==this.boardSize)return;const t=i.target;if(t.classList.contains("empty"))return;const s=this.tiles.findIndex((i=>i===Number(t.dataset.key)));if(""===this.tiles[s-1]&&s%this.size!=0){const i=this.tiles[s-1];this.tiles[s-1]=this.tiles[s],this.tiles[s]=i}if(""===this.tiles[s+1]&&(s+1)%this.size!=0){const i=this.tiles[s+1];this.tiles[s+1]=this.tiles[s],this.tiles[s]=i}if(""===this.tiles[s-this.size]){const i=this.tiles[s-this.size];this.tiles[s-this.size]=this.tiles[s],this.tiles[s]=i}if(""===this.tiles[s+this.size]){const i=this.tiles[s+this.size];this.tiles[s+this.size]=this.tiles[s],this.tiles[s]=i}this.renderTiles(this.tiles),this.checkTheEndOfGame()}checkTheEndOfGame(){const i=[...this.tiles];i.pop(),this.tiles.length===this.boardSize&&JSON.stringify(i)===JSON.stringify(this.tilesWin)&&(this.gameWon=!0,setTimeout((()=>alert("You Win!")),5))}}(4).init()}))})();