(()=>{"use strict";window.addEventListener("load",(()=>{new class{constructor(t){const e=[];for(let i=0;i<t*t-1;i++)e[i]=i+1;e[t*t-1]="",this.tilesWin=e,this.container=document.createElement("DIV"),this.renderTiles=this.renderTiles.bind(this),this.beginGame=this.beginGame.bind(this),this.shuffle=this.shuffle.bind(this),this.moveToEmpty=this.moveToEmpty.bind(this)}init(){const t=document.querySelector(".game-begin"),e=document.createElement("BUTTON");e.innerHTML="Start new Game",e.classList.add("start-game"),this.container.classList.add("container"),t.append(e,this.container),this.renderTiles(this.tilesWin),e.addEventListener("click",this.beginGame)}beginGame(){this.tiles=[...this.tilesWin],this.shuffle(this.tiles),this.renderTiles(this.tiles)}shuffle(t){for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1)),s=t[i];t[i]=t[e],t[e]=s}return t}renderTiles(t){this.container.innerHTML="",t.forEach((t=>{new class{constructor(t){this.name=t}render(t){const e=document.createElement("div");e.innerHTML=`\n    <p>${this.name}</p>\n    `,e.classList.add("tiles"),e.setAttribute("data-key",`${this.name}`),""===this.name&&e.classList.add("empty"),t.append(e)}}(t).render(this.container)})),this.container.addEventListener("click",this.moveToEmpty),localStorage.setItem("tiles",JSON.stringify(this.tiles))}moveToEmpty(t){const e=t.target.closest("DIV"),i=this.tiles.findIndex((t=>t===Number(e.dataset.key)));if(console.log(`before move ${this.tiles}`),console.log(i),""===this.tiles[i-1]&&i%4!=0){const t=this.tiles[i-1];this.tiles[i-1]=this.tiles[i],this.tiles[i]=t}if(""===this.tiles[i+1]&&(i+1)%4!=0){const t=this.tiles[i+1];this.tiles[i+1]=this.tiles[i],this.tiles[i]=t}if(""===this.tiles[i-4]){const t=this.tiles[i-4];this.tiles[i-4]=this.tiles[i],this.tiles[i]=t}if(""===this.tiles[i+4]){const t=this.tiles[i+4];this.tiles[i+4]=this.tiles[i],this.tiles[i]=t}this.renderTiles(this.tiles),console.log(`after move ${this.tiles}`)}}(4).init(4)}))})();